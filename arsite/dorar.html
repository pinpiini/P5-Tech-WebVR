<!DOCTYPE html>
<html>

<head>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://libs.zappar.com/zappar-aframe/2.0.0/zappar-aframe.js"></script>

    <meta charset="utf-8" />
    <title>Zappar for A-Frame: Instant Tracking 3D Model Example</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
        }

        #zappar-placement-ui {
            position: absolute;
            bottom: 30px;
            width: 200px;
            left: calc(50% - 100px);

            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            text-align: center;
            font-family: sans-serif;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
        }

        #reset-button {
            position: absolute;
            bottom: 30px;
            width: 200px;
            left: calc(50% - 100px);

            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            text-align: center;
            font-family: sans-serif;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            display: none;
        }
    </style>
</head>

<body>
    <a-scene>
        <a-assets>
            <img id="book" src="../assets/doraemon.png">
            <img id="ratingimage" src="../assets/rating45.jpg">
        </a-assets>
        <!-- Ask user for camera permissions, display some text if permission is denied -->
        <a-entity zappar-permissions-ui id="permissions"></a-entity>
        <!-- shows a full-page dialog that informs the user they're using an unsupported browser -->
        <a-entity zappar-compatibility-ui id="compatibility"></a-entity>

        <a-camera zappar-camera></a-camera>

        <!-- Setup our instant tracker and start it in placement mode so the user can -->
        <!-- choose a location for the object -->
        <a-entity zappar-instant="placement-mode: true" id="instant-tracker">
            <!-- Include a 3D model inside our instant tracker -->
            <a-plane height="1.7" width="1.2" material="color:#333;transparent: true"></a-plane>
            <a-plane height="1.5" width="1" material="src: #book; shader: flat; transparent: true" position="0 0 0.01"></a-plane>
            <a-text id="book-title" value="Cerita Spesial Doraemon: Canda" position="-1.2 -1.3 0" scale="0.8 0.8 0.8" visible="false" opacity="0" color="#FFFFFF"></a-text>
            <a-text id="book-description" value="Komik Cerita Spesial Doraemon: Canda karya Fujiko F. Fujio menjadi salah satu komik yang wajib untuk diikuti. Komik ini memiliki konsep cerita cukup unik dan mengesankan sehingga berbeda dari komik lainnya. Nobita panik, karena dirinya tidak mempunyai keahlian yang bisa dipentaskan di acara perpisahan. Padahal dalam acara perpisahan itu, setiap anak harus membuat sebuah atraksi. Berkat ide aneh Doraemon, Nobita tampil bermusik kentut. Doraemon selalu punya cerita menarik. Komik best seller. Yuk, mulai ikuti dan simak serial komik ini!" position="-1.2 -2 0" scale="0.5 0.5 0.5" width="5" visible="false" opacity="0" color="#BBBBBB"></a-text>
            <!-- Additional planes around the book -->
            <a-entity id="plane-left" position="-1.5 0 0" rotation="0 30 0" visible="false">
                <a-plane height="0.8" width="1.2" material="src: #ratingimage; transparent: true" position="0 0.45 0"></a-plane>
                <a-text value="Rating: 4.5/5" position="-0.6 -0.6 0" scale="0.5 0.5 0.5" color="#FFFFFF"></a-text>
            </a-entity>
            
        </a-entity>
        </a-scene>
        
        <!-- Some UI for the user to tap to indicate they're happy with the placement -->
        <div id="zappar-placement-ui">Tap here to place the object</div>
        <!-- Button to reset the placement -->
        <div id="reset-button">Reset Placement</div>
        
        <script>
            // Listen for when the user taps the placement UI
            const placementUI = document.getElementById("zappar-placement-ui");
            const resetButton = document.getElementById("reset-button");
        
            placementUI.addEventListener("click", function() {
                // Set placement mode to false on our instant tracker
                const instantTracker = document.getElementById("instant-tracker");
                instantTracker.setAttribute("zappar-instant", "placement-mode: false");
        
                // Show the book title, description, and additional planes with animation
                const bookTitle = document.getElementById("book-title");
                const bookDescription = document.getElementById("book-description");
                const planeLeft = document.getElementById("plane-left");
                
        
                bookTitle.setAttribute("visible", "true");
                bookDescription.setAttribute("visible", "true");
                planeLeft.setAttribute("visible", "true");
                
        
                // Start animation
                bookTitle.setAttribute("animation__opacity", "property: text.opacity; to: 1; dur: 1000");
                bookDescription.setAttribute("animation__opacity", "property: text.opacity; to: 1; dur: 1000");
                planeLeft.setAttribute("animation__opacity", "property: material.opacity; to: 1; dur: 1000");
                
        
                // Show the reset button
                resetButton.style.display = "block";
        
                // Remove the placement UI
                placementUI.remove();
            });
        
            // Listen for when the user taps the reset button
            resetButton.addEventListener("click", function() {
                // Reset placement mode to true on our instant tracker
                const instantTracker = document.getElementById("instant-tracker");
                instantTracker.setAttribute("zappar-instant", "placement-mode: true");
        
                // Hide the book title, description, and additional planes
                const bookTitle = document.getElementById("book-title");
                const bookDescription = document.getElementById("book-description");
                const planeLeft = document.getElementById("plane-left");
                
        
                bookTitle.setAttribute("visible", "false");
                bookDescription.setAttribute("visible", "false");
                planeLeft.setAttribute("visible", "false");
                
                // Show the placement UI again
                document.body.appendChild(placementUI);
        
                // Hide the reset button
                resetButton.style.display = "none";
            });
        </script>
        </body>
        </html>
        